#!/bin/sh

list_all_ports() {
	find ports -type d ! -path ports -exec basename {} \;
}

ports_has() {
	[ ! -f "ports/$1/APKBUILD" ] && return 1 || true
}

get_apkbuild_description() {
	grep '^pkgdesc=.*' ports/"$1"/APKBUILD | cut -d= -f2 | sed -e 's/^"\(.*\)"$/\1/g'
}

get_apkbuild_version() {
	grep '^pkgver=.*' ports/"$1"/APKBUILD | cut -d= -f2
}

opt=${1:-'-a'}
shift 

case $opt in
	'-a') list_all_ports ;;
	'-d') get_apkbuild_description "$1" ;;
	'-e') ports_has "$1" ;;
	'-v') get_apkbuild_version "$1" ;;
esac

